On this page

- [Root Object](#Root Object)
- [Suggestion Object](#Suggestion Object)
- [Subcommand Object](#Subcommand Object)
- [Option Object](#Option Object)
- [Arg Object](#Arg Object)
- [Generator Object](#Generator Object)

### Root Object

The root object is used to define every completion spec. It must be declared as a `var`, not a `const` or `let`, and it must be called `completionSpec`. At it's core, the completion spec is a [Subcommand Object](#Subcommand Object).

```jsx
// Must be "var" NOT "let" or "const")
// Must be "completionSpec" 
var completionSpec = { // this is a Subcommand Object
	...
}
```

### Suggestion Object

Fig parses your completion spec and outputs an array of suggestion objects. Each item you see in the autocomplete menu, with an icon, name, and description, are suggestion objects. You can customize a suggestion object to change its UI and the value that's inserted into the terminal when the user presses enter/tab.

![](../assets/Autocomplete/api/suggestionObjects.png)

Suggestion objects are mostly internally generated by Fig, except when you define your own `additionalSuggestions`.

| Property Name | Type                       | Required | Default                                                      | Description                                                  |
| ------------- | -------------------------- | -------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| name          | string or array of strings | ☑        |                                                              | The text that’s suggested in the dropdown list               |
| displayName   | string                     | ☐        | the name prop                                                | Overrides the name property                                  |
| insertValue   | string                     | ☐        | the name prop                                                | The value that's inserted into the terminal when a user presses enter/tab. <br /><br />Can be customized, can insert `{cursor}` in the string to place the cursor after insert.<br />e.g. `git commit -m {cursor} "message"` would place the cursor after -m. |
| description   | string                     | ☐        | null                                                         | The text that gets rendered at the bottom of the autocomplete box. |
| type          | string                     | ☐        | null                                                         | The type of suggestion, one of folder, file, arg, subcommand, option, special |
| icon          | string                     | ☐        | auto-generated based on type prop. If type doesn't exist, will be `?` | The icon that is rendered is based on the type, unless overwritten |

### Subcommand Object

Used to define subcommands under another command. For example, within `git commit`, `commit` is a subcommand of `git`.

Subcommands are recursive by nature.

| Property Name         | Type                               | Required | Default             | Description                                                  |
| --------------------- | ---------------------------------- | -------- | ------------------- | ------------------------------------------------------------ |
| name                  | string or array of strings         | ☑        |                     | Refer to `name` under [Suggestion Object](#Suggestion Object) |
| displayName           | string                             | ☐        | the name prop       |                                                              |
| insertValue           | string                             | ☐        | the name prop       | Refer to `insertValue` under [Suggestion Object](#Suggestion Object) |
| description           | string                             | ☐        | null                | Refer to `description` under [Suggestion Object](#Suggestion Object) |
| subcommands           | array of Subcommand objects        | ☐        |                     |                                                              |
| icon                  | string                             | ☐        | the subcommand icon | Refer to `icon` under [Suggestion Object](#Suggestion Object) |
| options               | array of Option objects            | ☐        |                     |                                                              |
| args                  | Arg object or array of Arg objects | ☐        |                     |                                                              |
| additionalSuggestions | array of Suggestion objects        | ☐        |                     |                                                              |



### Option Object

Options are defined to signal to Fig that there may be a flag or option following the subcommand. For example, in the `git checkout -b` command, `-b` is an option of `checkout`.

| Property Name | Type                               | Required | Default | Description                                                  |
| ------------- | ---------------------------------- | -------- | ------- | ------------------------------------------------------------ |
| name          | string or array of strings         | ☑        |         | Refer to `name` under [Suggestion Object](#Suggestion Object) |
| displayName   | string                             | ☐        |         |                                                              |
| insertValue   | string                             | ☐        |         | Refer to `insertValue` under [Suggestion Object](#Suggestion Object) |
| description   | string                             | ☐        |         | Refer to `description` under [Suggestion Object](#Suggestion Object) |
| args          | Arg object or array of Arg objects | ☐        |         |                                                              |
| icon          | string                             | ☐        |         | Refer to `icon` under [Suggestion Object](#Suggestion Object) |

**Note:** We rely on Arg objects to map what the user has typed to a completion spec. e.g. if you were building the git completion spec, under `git commit` you would specify an option for `-m, --message`.

The presence of an Arg object in a Subcommand or Option object will signal that the given subcommand or option will take an arg. It is important to specify it, even if you don't fill in its optional properties.

Entering`args: {}` is enough to inform the parser to expect an argument.



### Arg Object

An object specifying a user generated argument.

| Property Name | Type                                            | Required | Default                                                      | Description                                                  |
| ------------- | ----------------------------------------------- | -------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| name          | string                                          | ☐        |                                                              | Refer to `name` under [Suggestion Object](#Suggestion Object) |
| displayName   | string                                          | ☐        | the name prop                                                |                                                              |
| insertValue   | string                                          | ☐        | the name prop                                                | Refer to `insertValue` under [Suggestion Object](#Suggestion Object) |
| description   | string                                          | ☐        | null                                                         | Refer to `description` under [Suggestion Object](#Suggestion Object) |
| suggestions   | array of strings or array of Suggestion objects | ☐        | null                                                         |                                                              |
| icon          | string                                          | ☐        | auto-generated based on type prop. If type doesn't exist, will be ? | Refer to `icon` under [Suggestion Object](#Suggestion Object) |
| template      | string                                          | ☐        |                                                              | Must be either `"filepaths"` or `"folders"`                  |
| generators    | Generator object or array of Generator objects  | ☐        |                                                              |                                                              |

**Note**: Nothing is required in an Arg object. The presence of it in a Subcommand or Option object will signal that the given subcommand or option will take an arg. It is important to specify it, even if you don't fill in the details (literally do `args: {},` ) otherwise the parsing will be messed up.

### Generator Object

Generators are used to programatically generate suggestion objects. For example, they can be used to fetch and suggest a list of git remotes, or to grab all the folders in the current working directory.

| Property Name             | Type                                                         | Required | Default | Description                             |
| ------------------------- | ------------------------------------------------------------ | -------- | ------- | --------------------------------------- |
| template                  | string                                                       | ☐        |         | Must be either "filepaths" or "folders" |
| filterTemplateSuggestions | function * Input: array of Suggestion objects * Output: array of Suggestion objects | ☐        |         |                                         |
| script                    | string OR function function * Input: array of strings * Output: string | ☐        |         |                                         |
| splitOn                   | string                                                       | ☐        |         |                                         |
| postProcess               | function * Input: string * Output: array of Suggestion objects | ☐        |         |                                         |
| custom                    | async function  * Input: array of strings * Output: array of Suggestion objects | ☐        |         |                                         |
| trigger                   | string or function function * Inputs: string, string  * Output: boolean | ☐        |         |                                         |
| filterTerm                | string or function function * Input: string * Output: string | ☐        |         |                                         |

At least one of `template`, `script`, or `custom` are **required**. Only one of these three props is allowed per generator.

Learn more:

[Generators](./generators.md)

